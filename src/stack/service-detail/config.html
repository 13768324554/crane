<section layout="row" class="info-list-detail">
    <h2 flex="20">基本信息</h2>
    <div flex="80" layout="row" layout-wrap>
        <div flex="30"><h5>镜像</h5></div>
        <div flex="70"><p>{/serviceDetailCtrl.service.Spec.TaskTemplate.ContainerSpec.Image/}</p></div>
        <div flex="30"><h5>任务数量</h5></div>
        <div flex="70">
          <p data-ng-if="serviceConfigCtrl.service.Spec.Mode.Replicated" ng-class="{'no-info': !serviceConfigCtrl.service.Spec.Mode.Replicated.Replicas}">
          {/serviceConfigCtrl.service.Spec.Mode.Replicated.Replicas || '未配置'/}
          </p>
          <p data-ng-if="serviceConfigCtrl.service.Spec.Mode.Global">一主机一任务</p>
        </div>
        <div flex="30">
          <h5 class="help-info">容器退出的容忍时间<i class="fa fa-umbrella"></i>
            <md-tooltip md-direction="top">容器将在容忍时间之后被强制杀死</md-tooltip>
          </h5>
        </div>
        <div flex="70">
            <p ng-class="{'no-info': !serviceConfigCtrl.service.Spec.TaskTemplate.ContainerSpec.StopGracePeriod}">
                {/serviceConfigCtrl.service.Spec.TaskTemplate.ContainerSpec.StopGracePeriod / Math.pow(10, 9)|| '未配置'/}
            </p>
        </div>
        <div flex="30"><h5>容器目录</h5></div>
        <div flex="70"><p ng-class="{'no-info': !serviceConfigCtrl.service.Spec.TaskTemplate.ContainerSpec.Dir}">
          {/serviceConfigCtrl.service.Spec.TaskTemplate.ContainerSpec.Dir || '未配置'/}</p>
        </div>
    </div>
</section>

<section layout="row" class="info-list-detail">
    <h2 flex="20">每个任务的资源限制</h2>
    <div flex="80" layout="row" layout-wrap>
        <div flex="30">
            <h5>CPU<small>核</small></h5>
        </div>
        <div flex="70"><p
                ng-class="{'no-info': !serviceConfigCtrl.service.Spec.TaskTemplate.Resources.Limits.NanoCPUs}">
            {/serviceConfigCtrl.service.Spec.TaskTemplate.Resources.Limits.NanoCPUs /
            Math.pow(10, 9) || '未配置'/}</p></div>

        <div flex="30">
            <h5>内存<small>MB</small></h5>
        </div>
        <div flex="70"><p
                ng-class="{'no-info': !serviceConfigCtrl.service.Spec.TaskTemplate.Resources.Limits.MemoryBytes}">
            {/serviceConfigCtrl.service.Spec.TaskTemplate.Resources.Limits.MemoryBytes / (
            1024 * 1024) ||
            '未配置'/}</p>
        </div>
    </div>
</section>

<section layout="row" class="info-list-detail">
    <h2 flex="20">每个任务的资源预留</h2>
    <div flex="80" layout="row" layout-wrap>
        <div flex="30">
            <h5>CPU<small>核</small></h5>
        </div>
        <div flex="70"><p
                ng-class="{'no-info': !serviceConfigCtrl.service.Spec.TaskTemplate.Resources.Reservations.NanoCPUs}">
            {/serviceConfigCtrl.service.Spec.TaskTemplate.Resources.Reservations.NanoCPUs
            / Math.pow(10, 9) || '未配置'/}</p></div>

        <div flex="30">
            <h5>内存<small>MB</small></h5>
        </div>
        <div flex="70"><p
                ng-class="{'no-info': !serviceConfigCtrl.service.Spec.TaskTemplate.Resources.Reservations.MemoryBytes}">
            {/serviceConfigCtrl.service.Spec.TaskTemplate.Resources.Reservations.MemoryBytes / ( 1024 *
            1024) || '未配置'/}</p>
        </div>
    </div>
</section>

<section layout="row" class="info-list-detail">
    <h2 flex="20">容错</h2>
    <div flex="80" layout="row" layout-wrap>
        <div flex="30"><h5>重启策略</h5></div>
        <div flex="70"><p ng-class="{'no-info': !serviceConfigCtrl.service.Spec.TaskTemplate.RestartPolicy.Condition}">
          {/TASK_RESTART_POLICY_COND[serviceConfigCtrl.service.Spec.TaskTemplate.RestartPolicy.Condition] || '未配置'/}</p>
        </div>
        <div flex="30">
            <h5 class="help-info">重启间隔<small>秒</small></h5>
        </div>
        <div flex="70"><p ng-class="{'no-info': !serviceConfigCtrl.service.Spec.TaskTemplate.RestartPolicy.Delay}"> {/serviceConfigCtrl.service.Spec.TaskTemplate.RestartPolicy.Delay / Math.pow(10, 9) ||
          '未配置'/}</p>
        </div>
        <div flex="30">
          <h5>在?时间之内<small>秒</small></h5>
        </div>
        <div flex="70">
          <p ng-class="{'no-info': !serviceConfigCtrl.service.Spec.TaskTemplate.RestartPolicy.Window}">
          {/serviceConfigCtrl.service.Spec.TaskTemplate.RestartPolicy.Window / Math.pow(10, 9) || '未配置'/}
          </p>
        </div>
        <div flex="30"><h5>最多尝试重启?次</h5></div>
        <div flex="70">
          <p ng-class="{'no-info': !serviceConfigCtrl.service.Spec.TaskTemplate.RestartPolicy.MaxAttempts}">
          {/serviceConfigCtrl.service.Spec.TaskTemplate.RestartPolicy.MaxAttempts || '未配置'/}
          </p>
        </div>
    </div>
</section>

<section layout="row" class="info-list-detail">
    <h2 flex="20">滚动更新</h2>
    <div flex="80" layout="row" layout-wrap>
        <div flex="30">
        <h5>在?时间内<small>秒</small></h5>
        </div>
        <div flex="70"><p ng-class="{'no-info': !serviceConfigCtrl.service.Spec.UpdateConfig.Delay}">
            {/serviceConfigCtrl.service.Spec.UpdateConfig.Delay / Math.pow(10, 9) || '未配置'/}</p></div>
        <div flex="30"><h5>并行更新?个任务</h5></div>
        <div flex="70"><p ng-class="{'no-info': !serviceConfigCtrl.service.Spec.UpdateConfig.Parallelism}">
            {/serviceConfigCtrl.service.Spec.UpdateConfig.Parallelism || '未配置'/}</p></div>
    </div>
</section>

<section layout="row" class="info-list-detail">
    <h2 flex="20">环境变量</h2>
    <div flex="80" layout="row" layout-wrap>
        <table cellpadding="0" cellspacing="0" dm-empty-display="serviceConfigCtrl.service.Spec.TaskTemplate.ContainerSpec.Env">
            <tr>
                <th>KEY</th>
                <th>VALUE</th>
            </tr>

            <tr ng-repeat="env in serviceConfigCtrl.service.Spec.TaskTemplate.ContainerSpec.Env">
                <td>{/env.split('=')[0]/}</td>
                <td>{/env.split('=')[1]/}</td>
            </tr>
        </table>
    </div>
</section>

<section layout="row" class="info-list-detail">
    <h2 flex="20">服务标签</h2>
    <div flex="80" layout="row" layout-wrap>
        <table cellpadding="0" cellspacing="0" dm-empty-display="serviceConfigCtrl.service.Spec.Labels">
            <tr>
                <th>KEY</th>
                <th>VALUE</th>
            </tr>
            <tr ng-repeat="(key, value) in serviceConfigCtrl.service.Spec.Labels">
                <td>{/key/}</td>
                <td>{/value/}</td>
            </tr>
        </table>
    </div>
</section>

<section layout="row" class="info-list-detail">
    <h2 flex="20">容器标签</h2>
    <div flex="80" layout="row" layout-wrap>
        <table cellpadding="0" cellspacing="0" dm-empty-display="serviceConfigCtrl.service.Spec.TaskTemplate.ContainerSpec.Labels">
            <tr>
                <th>KEY</th>
                <th>VALUE</th>
            </tr>

            <tr ng-repeat="(key, value) in serviceConfigCtrl.service.Spec.TaskTemplate.ContainerSpec.Labels">
                <td>{/key/}</td>
                <td>{/value/}</td>
            </tr>
        </table>
    </div>
</section>

<section layout="row" class="info-list-detail">
    <h2 flex="20">端口映射</h2>
    <div flex="80" layout="row" layout-wrap>
        <table cellpadding="0" cellspacing="0" dm-empty-display="serviceConfigCtrl.service.Spec.EndpointSpec.Ports">
            <tr>
                <th>主机端口</th>
                <th>协议</th>
                <th>映射端口</th>
            </tr>

            <tr ng-repeat="port in serviceConfigCtrl.service.Spec.EndpointSpec.Ports">
                <td>{/port.TargetPort/}</td>
                <td>{/port.Protocol/}</td>
                <td>{/port.PublishedPort/}</td>
            </tr>
        </table>
    </div>
</section>

<section layout="row" class="info-list-detail">
    <h2 flex="20">挂载</h2>
    <div flex="80" layout="row" layout-wrap>
        <table cellpadding="0" cellspacing="0" dm-empty-display="serviceConfigCtrl.service.Spec.TaskTemplate.ContainerSpec.Mounts">
            <tr>
                <th>主机路径</th>
                <th>权限</th>
                <th>容器</th>
            </tr>

            <tr ng-repeat="mount in serviceConfigCtrl.service.Spec.TaskTemplate.ContainerSpec.Mounts">
                <td>{/mount.Source/}</td>
                <td>{/mount.ReadOnly ? '只读' : '读写'/}</td>
                <td>{/mount.Target/}</td>
            </tr>
        </table>
    </div>
</section>

<section layout="row" class="info-list-detail">
    <h2 flex="20">容器标签</h2>
    <div flex="80" layout="row" layout-wrap>
        <table cellpadding="0" cellspacing="0" dm-empty-display="serviceConfigCtrl.service.Spec.TaskTemplate.Placement.Constraints">
            <tr>
                <th>KEY</th>
                <th>VALUE</th>
            </tr>

            <tr ng-repeat="constraint in serviceConfigCtrl.service.Spec.TaskTemplate.Placement.Constraints">
                <td>{/constraint.split('==')[0]/}</td>
                <td>{/constraint.split('==')[1]/}</td>
            </tr>
        </table>
    </div>
</section>

<section layout="row" class="info-list-detail">
    <h2 flex="20">启动命令</h2>
    <div flex="80" layout="row" layout-wrap>
        <table cellpadding="0" cellspacing="0" dm-empty-display="serviceConfigCtrl.service.Spec.TaskTemplate.ContainerSpec.Command">
            <tr>
                <th>CMD</th>
            </tr>

            <tr ng-repeat="cmd in serviceConfigCtrl.service.Spec.TaskTemplate.ContainerSpec.Command">
                <td>{/cmd/}</td>
            </tr>
        </table>
    </div>
</section>
